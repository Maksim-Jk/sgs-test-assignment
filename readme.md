# Создание и заполнение базы данных MS SQL

Это приложение предназначено для создания базы данных MS SQL и заполнения ее моковыми данными, которые используются в другой разрабатываемой форме. Для взаимодействия с базой данных используется библиотека mssql.

## Подготовка к работе

Для начала работы с проектом выполните следующие шаги:

1. Склонируйте репозиторий с проектом на свой локальный компьютер:

   ```shell
   git clone https://github.com/Maksim-Jk/sgs-test-assignment.git
   ```

2. Перейдите в каталог проекта

   ```shell
   cd sgs-test-assignment
   ```

3. Перключите ветку git

   ```shell
   git checkout 3-ms-sql
   ```

4. Перейдите в каталог проекта

   ```shell
   cd 3-ms-sql
   ```

5. Установите необходимые зависимости с использованием npm (Node Package Manager):

   ```shell
   npm install
   ```

6. Создайте файл `.env` в директории (`3-ms-sql`) и добавьте в него следующие переменные окружения:

   ```env
   DB_USER=ваш_пользователь
   DB_PASSWORD=ваш_пароль
   DB_SERVER=ваш_сервер
   DB_PORT=ваш_порт
   DB_DEFAULT_DATABASE=ваша_база_данных
   ```

   Замените значения на ваши реальные данные для подключения к MS SQL серверу.

## Запуск проекта

После подготовки к работе, вы можете запустить выполнение скрипта. Выполните следующие шаги:

1. Запустите выполнение скрипта командой:

   ```shell
   npm start
   ```

После выполнения этой команды, приложение создаст новую базу данных MS SQL, создаст таблицы "Cities", "Workshops" и "Employees", а затем заполнит их моковыми данными из файла (`mock.data.js`).

## Структура Базы Данных

Приложение создает следующие таблицы в базе данных:

1. **Таблица "Cities" (Города):**

   - **Поле id (Идентификатор):** Уникальный числовой идентификатор города.
   - **Поле name (Наименование):** Название города в формате NVARCHAR(255), то есть строка максимальной длины 255 символов.

2. **Таблица "Workshops" (Цехи):**

   - **Поле id (Идентификатор):** Уникальный числовой идентификатор цеха.
   - **Поле name (Наименование):** Название цеха в формате NVARCHAR(255).
   - **Поле cityId (Идентификатор города):** Это внешний ключ (FOREIGN KEY), связывающий цех с соответствующим городом. Он ссылается на поле "id" в таблице "Cities", указывая, к какому городу относится данный цех.

3. **Таблица "Employees" (Сотрудники):**
   - **Поле id (Идентификатор):** Уникальный числовый идентификатор сотрудника.
   - **Поле name (Имя сотрудника):** Имя сотрудника в формате NVARCHAR(255).
   - **Поле workshopId (Идентификатор цеха):** Это внешний ключ (FOREIGN KEY), связывающий сотрудника с соответствующим цехом. Он ссылается на поле "id" в таблице "Workshops", указывая, в каком цехе работает данный сотрудник.

### Зависимости

- Таблица "Workshops" зависит от таблицы "Cities" с использованием внешнего ключа "cityId". Это означает, что каждый цех связан с определенным городом.
- Таблица "Employees" зависит от таблицы "Workshops" с использованием внешнего ключа "workshopId". Это означает, что каждый сотрудник связан с определенным цехом.

Эти зависимости позволяют организовать структуру данных так, чтобы можно было определить, к какому городу и цеху принадлежит каждый сотрудник.

## Ошибки и Исключения

Приложение обрабатывает возможные ошибки и исключения при создании базы данных и таблиц. В случае возникновения ошибок, они будут выведены в консоль, и выполнение приложения завершится.

## Важно

- Приложение предназначено для целей тестирования и разработки.
- Перед использованием убедитесь, что все конфигурационные данные для подключения к MS SQL серверу правильно настроены и работает SQL Server Browser.

Для дополнительной информации о библиотеке mssql, вы можете посетить официальный репозиторий на GitHub: [mssql GitHub](https://github.com/tediousjs/node-mssql).
